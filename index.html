<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Sirius Hub Labs — Guia de Operação do Site (Docusaurus v3)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg: #0f1115;
      --panel: #151922;
      --muted: #94a3b8;
      --text: #e6e8ee;
      --primary: #22c55e;
      --primary-700: #16a34a;
      --border: #1f2633;
      --warn: #f59e0b;
      --danger: #ef4444;
      --code-bg: #0b0e14;
      --code-border: #1c2433;
      --link: #7dd3fc;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Noto Sans",Arial,"Apple Color Emoji","Segoe UI Emoji";
    }
    .layout{display:grid; grid-template-columns:280px 1fr; gap:24px; min-height:100vh}
    aside{position:sticky; top:0; align-self:start; height:100vh; padding:24px 16px; background:var(--panel); border-right:1px solid var(--border)}
    main{padding:32px 28px 80px; max-width:1100px}
    h1{font-size:clamp(28px,3vw,40px); margin:0 0 8px}
    .subtitle{color:var(--muted); margin-bottom:24px}
    h2{margin-top:36px; font-size:26px}
    h3{margin-top:24px; font-size:20px}
    p{margin:10px 0}
    .muted{color:var(--muted)}
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}
    .toc h3{margin:0 0 12px; font-size:16px; color:#cbd5e1; letter-spacing:.4px}
    .toc a{display:block; padding:10px 12px; border-radius:8px; color:#cbd5e1}
    .toc a.active,.toc a:hover{background:#111726; color:#e2e8f0}
    .toc .section{margin-top:14px; font-size:12px; text-transform:uppercase; letter-spacing:.8px; color:#8ea2bd}
    .brand{display:flex; align-items:center; gap:10px; margin-bottom:18px}
    .badge{display:inline-block; font-size:12px; padding:.2rem .5rem; border-radius:6px; background:#0e1a2b; border:1px solid var(--border); color:#a5b4fc}
    .chip{display:inline-block; font-size:12px; padding:.1rem .4rem; border-radius:999px; border:1px solid var(--border); background:#0e1524; color:#cbd5e1}
    .panel{background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:18px; box-shadow:var(--shadow); margin:16px 0}
    .callout{border-left:4px solid var(--primary); padding:12px 14px; background:#0d1422; border-radius:8px; margin:16px 0}
    .callout.warn{border-left-color:var(--warn); background:#1c1607}
    .callout.danger{border-left-color:var(--danger); background:#1f0d0d}
    .callout .title{font-weight:700; margin-bottom:6px}
    pre{margin:0; overflow:auto; background:var(--code-bg); color:#e2e8f0; border:1px solid var(--code-border); border-radius:10px; padding:14px}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .codebox{position:relative; margin:10px 0 18px}
    .copy{position:absolute; top:8px; right:8px; border:1px solid var(--border); background:#0d1320; color:#cbd5e1; border-radius:8px; padding:6px 8px; cursor:pointer; font-size:12px}
    .copy:active{transform:scale(.98)}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:14px}
    .tag{display:inline-block; font-size:12px; color:#9ca3af; padding:.15rem .5rem; background:#0a1221; border:1px solid var(--border); border-radius:6px; margin-right:6px}
    hr{border:0; border-top:1px solid var(--border); margin:28px 0}
    .footer{color:#8fa2bf; font-size:12px; padding:14px; text-align:center}
    @media (max-width:980px){.layout{grid-template-columns:1fr} aside{position:static; height:auto; border-right:0; border-bottom:1px solid var(--border)}}
  </style>
</head>
<body>
<div class="layout">
  <aside>
    <div class="brand">
      <div style="width:10px;height:10px;border-radius:999px;background:var(--primary)"></div>
      <div><strong>Sirius Hub Labs</strong> <span class="badge">Guia Docusaurus v3</span></div>
    </div>
    <div class="toc">
      <h3>Navegação</h3>
      <a href="#visao-geral" class="active">Visão geral & princípios</a>
      <div class="section">Instalação</div>
      <a href="#pre-requisitos">Pré-requisitos</a>
      <a href="#criar-projeto">Criar projeto (opcional)</a>
      <a href="#repos-e-branches">Clonar repo & branches</a>
      <a href="#dependencias">Instalar dependências</a>
      <div class="section">Desenvolvimento</div>
      <a href="#dev-local">Dev local</a>
      <a href="#teste-producao">Teste de produção local</a>
      <div class="section">Publicação</div>
      <a href="#deploy">Deploy (GitHub Pages)</a>
      <a href="#gh-pages-config">Configurações do Pages</a>
      <a href="#automatizar-ci">Automatizar com GitHub Actions</a>
      <div class="section">Operação</div>
      <a href="#fluxo-diario">Fluxo diário</a>
      <a href="#rollback">Rollback</a>
      <a href="#git-util">Git — atalhos úteis</a>
      <a href="#scripts">Scripts úteis</a>
      <a href="#nao-faca-merge">⚠️ Não faça merge source → main</a>
    </div>
  </aside>

  <main>
    <header>
      <h1>Sirius Hub Labs — Guia de Operação do Site</h1>
      <div class="subtitle">Docusaurus 3 • Fluxo oficial de <span class="chip">desenvolvimento</span> → <span class="chip">teste</span> → <span class="chip">build</span> → <span class="chip">deploy</span></div>
      <div class="callout">
        <div class="title">Regra de ouro</div>
        <ul>
          <li><strong>source</strong> → onde você <em>desenvolve</em> tudo (código, docs, tema, CSS, plugins).</li>
          <li><strong>main</strong> → <em>não edite</em>. É só o resultado do <code>npm run build/deploy</code> que o GitHub Pages serve ao público.</li>
        </ul>
      </div>
    </header>

    <section id="visao-geral" class="panel">
      <h2>Visão geral & princípios</h2>
      <ul>
        <li><strong>Build reprodutível</strong>: Node LTS + lockfile.</li>
        <li><strong>QA antes do deploy</strong>: sirva o <code>/build</code> localmente.</li>
        <li><strong>Automação opcional</strong>: publicar automaticamente quando a <code>source</code> mudar.</li>
      </ul>
    </section>

    <section id="pre-requisitos" class="panel">
      <h2>1) Pré-requisitos</h2>
      <div class="codebox">
        <button class="copy" data-copy="pre1">Copiar</button>
        <pre id="pre1"><code># Node LTS (recomendado usar nvm)
nvm install --lts
nvm use --lts
node -v
npm -v</code></pre>
      </div>
    </section>

    <section id="criar-projeto" class="panel">
      <h2>2) Criar um projeto do zero (opcional)</h2>
      <p>Comando que você registrou para a série 3.x:</p>
      <div class="codebox">
        <button class="copy" data-copy="pre1b">Copiar</button>
        <pre id="pre1b"><code>npx create-docusaurus@latest sirius-docs classic</code></pre>
      </div>
    </section>

    <section id="repos-e-branches" class="panel">
      <h2>3) Clonar repositório & preparar branches</h2>
      <div class="codebox">
        <button class="copy" data-copy="pre2">Copiar</button>
        <pre id="pre2"><code>git clone https://github.com/Phelipe-Sempreboni/sirius-hub.github.io.git
cd sirius-hub.github.io

# criar e publicar branch de trabalho
git checkout -b source
git push -u origin source</code></pre>
      </div>
      <div class="callout warn">
        <div class="title">No GitHub (recomendado)</div>
        <ul>
          <li>Defina <strong>source</strong> como <em>default branch</em>.</li>
          <li>Proteja a <strong>main</strong> para <em>bloquear pushes diretos</em>.</li>
        </ul>
      </div>
    </section>

    <section id="dependencias" class="panel">
      <h2>4) Instalar dependências</h2>
      <div class="codebox">
        <button class="copy" data-copy="pre3">Copiar</button>
        <pre id="pre3"><code># no diretório do site (ex.: sirius-docs/)
npm install

# preset TS (melhor DX/TS)
npm i -D @tsconfig/docusaurus

# busca local (sem serviço externo)
npm i @easyops-cn/docusaurus-search-local</code></pre>
      </div>
    </section>

    <section id="dev-local" class="panel">
      <h2>5) Desenvolvimento (local)</h2>
      <div class="grid">
        <div>
          <h3>Servidor de desenvolvimento</h3>
          <div class="codebox">
            <button class="copy" data-copy="pre4">Copiar</button>
            <pre id="pre4"><code>npm run start</code></pre>
          </div>
        </div>
        <div>
          <h3>Limpar cache e iniciar (um único comando)</h3>
          <div class="codebox">
            <button class="copy" data-copy="pre5u">Copiar</button>
            <pre id="pre5u"><code>npm run clear && npm run start</code></pre>
          </div>
          <p class="muted">Este é o comando <strong>unificado</strong> que você citou. Faz a limpeza e já sobe o servidor.</p>
        </div>
      </div>
      <div class="callout">
        <div class="title">Atenção ao <code>docusaurus.config.js</code></div>
        <ul>
          <li><strong>url/baseUrl</strong>: para User/Org Page, use <code>baseUrl: '/'</code>.</li>
          <li><strong>deploymentBranch</strong>: <code>main</code>.</li>
          <li><strong>Blog</strong>: se não usar, defina <code>blog: false</code> no preset.</li>
        </ul>
      </div>
    </section>

    <section id="teste-producao" class="panel">
      <h2>6) Teste de produção local (sem publicar)</h2>
      <div class="codebox">
        <button class="copy" data-copy="pre6">Copiar</button>
        <pre id="pre6"><code>npm run build
npx docusaurus serve build</code></pre>
      </div>
    </section>

    <section id="deploy" class="panel">
      <h2>7) Deploy (GitHub Pages)</h2>

      <h3>7.1 Credencial</h3>
      <div class="grid">
        <div>
          <h4>SSH (recomendado)</h4>
          <div class="codebox">
            <button class="copy" data-copy="pre7">Copiar</button>
            <pre id="pre7"><code>export USE_SSH=true
npm run deploy</code></pre>
          </div>
        </div>
        <div>
          <h4>Token HTTPS</h4>
          <div class="codebox">
            <button class="copy" data-copy="pre8">Copiar</button>
            <pre id="pre8"><code>export GIT_USER="Phelipe-Sempreboni"
export GITHUB_TOKEN="SEU_TOKEN_AQUI"
npm run deploy</code></pre>
          </div>
        </div>
      </div>

      <h3>7.2 Comando direto (equivalente)</h3>
      <div class="codebox">
        <button class="copy" data-copy="pre9">Copiar</button>
        <pre id="pre9"><code># versão 3.x
GIT_USER=Phelipe-Sempreboni npx docusaurus deploy</code></pre>
      </div>

      <h3>7.3 Build + deploy em sequência</h3>
      <div class="codebox">
        <button class="copy" data-copy="pre9b">Copiar</button>
        <pre id="pre9b"><code>npm run build && npm run deploy</code></pre>
      </div>

      <div class="callout">
        <div class="title">O que o deploy faz?</div>
        <p>Gera o build (<code>/build</code>) e empurra os arquivos para a <strong>branch <code>main</code></strong> (conforme seu <code>docusaurus.config.js</code>). O GitHub Pages serve essa branch ao público.</p>
      </div>
    </section>

    <section id="gh-pages-config" class="panel">
      <h2>8) Configurações do GitHub Pages</h2>
      <ul>
        <li><strong>Pages → Branch</strong>: <code>main</code> / <code>/(root)</code>.</li>
        <li><strong>Domínio customizado</strong> (opcional): crie <code>static/CNAME</code> com seu domínio.</li>
      </ul>
    </section>

    <section id="automatizar-ci" class="panel">
      <h2>9) Automação (GitHub Actions)</h2>
      <p>Publica automaticamente quando a <code>source</code> receber push:</p>
      <div class="codebox">
        <button class="copy" data-copy="pre10">Copiar</button>
        <pre id="pre10"><code># .github/workflows/deploy.yml
name: Deploy Docusaurus

on:
  push:
    branches: [ source ]

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with: { fetch-depth: 0 }
      - uses: actions/setup-node@v4
        with: { node-version: '20' }
      - run: npm ci
      - run: npm run build
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./build
          publish_branch: main</code></pre>
      </div>
    </section>

    <section id="fluxo-diario" class="panel">
      <h2>10) Fluxo diário (resumo)</h2>
      <ol>
        <li>Trabalhe na <strong>source</strong> → <code>git add</code> / <code>commit</code> / <code>push</code>.</li>
        <li>QA local de produção: <code>npm run build</code> + <code>npx docusaurus serve build</code>.</li>
        <li>Publicar: <code>USE_SSH=true npm run deploy</code> (ou aguarde a Action).</li>
      </ol>
    </section>

    <section id="rollback" class="panel">
      <h2>11) Rollback simples</h2>
      <div class="codebox">
        <button class="copy" data-copy="pre11">Copiar</button>
        <pre id="pre11"><code>git checkout source
git log --oneline
git checkout &lt;commit_ou_tag_estavel&gt;
USE_SSH=true npm run deploy</code></pre>
      </div>
    </section>

    <section id="git-util" class="panel">
      <h2>12) Git — atalhos úteis</h2>
      <div class="grid">
        <div>
          <div class="tag">Criar e ir para a branch</div>
          <div class="codebox">
            <button class="copy" data-copy="preG1">Copiar</button>
            <pre id="preG1"><code>git checkout -b source</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">Enviar branch ao GitHub</div>
          <div class="codebox">
            <button class="copy" data-copy="preG2">Copiar</button>
            <pre id="preG2"><code>git push origin source</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">Listar/trocar branch</div>
          <div class="codebox">
            <button class="copy" data-copy="preG3">Copiar</button>
            <pre id="preG3"><code>git branch
git checkout source
git checkout main</code></pre>
          </div>
        </div>
      </div>
    </section>

    <section id="scripts" class="panel">
      <h2>13) Scripts úteis (cheat sheet)</h2>
      <div class="grid">
        <div>
          <div class="tag">dev</div>
          <div class="codebox"><button class="copy" data-copy="pre12">Copiar</button>
            <pre id="pre12"><code>npm run start</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">limpar cache</div>
          <div class="codebox"><button class="copy" data-copy="pre13">Copiar</button>
            <pre id="pre13"><code>npm run clear</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">build</div>
          <div class="codebox"><button class="copy" data-copy="pre14">Copiar</button>
            <pre id="pre14"><code>npm run build</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">servir build</div>
          <div class="codebox"><button class="copy" data-copy="pre15">Copiar</button>
            <pre id="pre15"><code>npx docusaurus serve build</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">deploy</div>
          <div class="codebox"><button class="copy" data-copy="pre16">Copiar</button>
            <pre id="pre16"><code>npm run deploy</code></pre>
          </div>
        </div>
        <div>
          <div class="tag">build + deploy</div>
          <div class="codebox"><button class="copy" data-copy="pre17">Copiar</button>
            <pre id="pre17"><code>npm run build && npm run deploy</code></pre>
          </div>
        </div>
      </div>
    </section>

    <section id="nao-faca-merge" class="panel">
      <h2>⚠️ Nunca faça <code>merge</code> de <code>source</code> para <code>main</code></h2>
      <div class="callout danger">
        <div class="title">Por quê?</div>
        <p>A <strong>main</strong> deve conter apenas os <em>artefatos gerados</em> (HTML/CSS/JS minificados). Se você der <code>merge</code> da <code>source</code> na <code>main</code>, polui a branch com código-fonte e quebra o fluxo. Para atualizar a <code>main</code>, use somente <code>npm run deploy</code> (ou a Action).</p>
      </div>
    </section>

    <hr/>
    <div class="footer">© Sirius Hub Labs • Guia operacional Docusaurus v3 • Arquivo autônomo (abra localmente em qualquer navegador).</div>
  </main>
</div>

<script>
  // TOC ativo
  function setActive(){
    document.querySelectorAll('.toc a').forEach(a=>a.classList.remove('active'));
    const hash = location.hash || '#visao-geral';
    const cur = document.querySelector('.toc a[href="'+hash+'"]');
    if(cur) cur.classList.add('active');
  }
  addEventListener('hashchange', setActive);
  addEventListener('load', setActive);

  // copiar blocos
  document.querySelectorAll('.copy').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('data-copy');
      const el = document.getElementById(id);
      if(!el) return;
      const text = el.innerText.replace(/\u00A0/g,' ');
      navigator.clipboard.writeText(text).then(()=>{
        const orig = btn.textContent;
        btn.textContent = 'Copiado ✓';
        setTimeout(()=>btn.textContent = orig, 1400);
      });
    });
  });
</script>
</body>
</html>
